"use strict";(self.webpackChunksubscription=self.webpackChunksubscription||[]).push([[7718],{15481:function(e,t,n){n.d(t,{T:function(){return i}});var r=n(20525),a=n(98267);let o={id:"",template:"",partnerLogo:"",rewardsCTAText:"",rewardsDeal:!1,fromDealLanding:!1},i=(0,r.vt)()((0,a.Zr)((e,t)=>({...o,setDeal:t=>e({...t}),resetDeal:()=>e({...o}),getId:()=>t().id}),{name:"deal-store-data"}))},89383:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(20525),a=n(98267);let o={fromOfferLanding:!1,offerRoute:"",offerParam:"",offerId:"",supportedOfferLoginMethods:[],fromSecretOfferPopup:!1},i=(0,r.vt)()((0,a.Zr)((e,t)=>({...o,setOfferGlobalData:t=>e({...t}),resetOfferGlobalData:()=>e({...o})}),{name:"offer-store-data"}))},57708:function(e,t,n){n.d(t,{J:function(){return d}});var r=n(20525),a=n(98267),o=n(93741);let i=e=>e.toLocaleLowerCase()===o.QTg.TELCO;var s=n(78519),l=n(25620);let u={isValidCard:!1,productId:"",processor:null,paymentInstruments:null,isChangeSubscriptionFlow:!1,b2bTelcoPaymentMethod:!1,selectedPricingPlan:null,selectedOperator:"",operators:[],selectedPlan:"",selectedPaymentMethod:0,isShowExistingCheckoutCard:!1,planBanners:[],paymentMethods:[],lastCheck:!1,sku:"",packageName:"",mobilePaySubscribeData:null,subscriptionFlow:o.c1L.ORGANIC_ACQUISITION,isClickedPayBtn:!1,products:[],skuDetails:null,stateDropinData:null,errorMessage:"",cashPayCongratsData:null,adyenPaymentInstrumentId:"",geoCta:"",isUpgradeFlow:!1,flow:"",searchQuery:"",isEWalletRenew:!1},d=(0,r.vt)()((0,a.Zr)((e,t)=>({...u,setIsValidCard:t=>e({isValidCard:t}),setCashPayCongratsData:n=>{e({cashPayCongratsData:{...t().cashPayCongratsData,...n}})},setProductId:t=>e({productId:t}),setIsEWalletRenew:t=>e({isEWalletRenew:t}),setProcessor:t=>e({processor:t}),setPaymentInstruments:t=>e({paymentInstruments:t}),setShowExistingCheckoutCard:t=>e({isShowExistingCheckoutCard:t}),setSku:t=>e({sku:t}),setPackageName:t=>e({packageName:t}),resetPayment:()=>e({...u}),changeSubscriptionFlow:t=>{e({isChangeSubscriptionFlow:(0,l.Fq)(t)})},changeB2BTelcoPaymentMethod:t=>{e({b2bTelcoPaymentMethod:i(t)})},setSelectedOperator:t=>e({selectedOperator:t}),setSelectedPricingPlan:(t,n)=>{let r=null;(null==t?void 0:t.length)>0&&(r=t.find(e=>e.period===n)||null),e({selectedPricingPlan:r})},setOperatorsByPaymentMethods:(n,r,a)=>{let o=a?"":t().selectedOperator,i=(0,s.$T)(n,r);(null==i?void 0:i.length)>0?o&&i.some(e=>e.operatorCode===o)||e({selectedOperator:i[0].operatorCode}):e({selectedOperator:""}),e({operators:i})},setSelectedPlan:t=>e({selectedPlan:t}),setSelectedPaymentMethod:t=>e({selectedPaymentMethod:t}),setPlanBanners:t=>e({planBanners:t}),setPaymentMethods:t=>e({paymentMethods:t}),setLastCheck:t=>e({lastCheck:t}),setMobilePaySubscribeData:t=>e({mobilePaySubscribeData:t}),setSubscriptionFlow:t=>{let{subscriptionFlow:n,isUpgradeFlow:r}=t;e({subscriptionFlow:n,isUpgradeFlow:r})},setClickedPayBtn:t=>e({isClickedPayBtn:t}),setPaymentProducts:t=>e({products:t}),setSkuDetails:t=>e({skuDetails:t}),setStateDropinData:t=>e({stateDropinData:t}),setErrorMessage:t=>e({errorMessage:t}),setAdyenPaymentInstrumentId:t=>e({adyenPaymentInstrumentId:t}),setGeoCta:t=>e({geoCta:t}),setFlow:t=>e({flow:t}),setSearchQuery:t=>e({searchQuery:t})}),{name:"payment-store-data"}))},1735:function(e,t,n){n.d(t,{d:function(){return i}});var r=n(20525),a=n(98267);let o={currentPromoCodeDetails:null,checkingCode:""},i=(0,r.vt)()((0,a.Zr)(e=>({...o,resetState:()=>e({...o}),resetCurrentPromoCodeDetails:()=>e({currentPromoCodeDetails:null}),saveCurrentPromoCodeDetails:t=>e({currentPromoCodeDetails:t}),setCheckingCode:t=>e({checkingCode:t})}),{name:"promocode-store-data"}))},78519:function(e,t,n){n.d(t,{$T:function(){return a},h5:function(){return o}});var r=n(93741);function a(e,t){return(null==e?void 0:e.length)>0?e.filter(e=>e.type===r.J16.MOBILE_PAY&&e.plans.some(e=>e.period===t)&&!e.isDisabledByPromoCode&&!e.isDisabledBySelectedPlan).map(e=>{let{operatorCode:t,operatorName:n,paymentMode:r,shortCode:a,isParkingPeriodAllowed:o,mopCardOfferDealDisclaimer:i,summarySheetOfferDealPriceBreakDown:s,offerDealDiscountAmount:l,operatorOfferTitle:u}=e;return{operatorCode:t,operatorName:n,paymentMode:r,shortCode:a,isParkingPeriodAllowed:o,logo:function(e){let{carrierImageUrl:t,lightCarrierImageUrl:n}=e;return n||t}(e),mopCardOfferDealDisclaimer:i,summarySheetOfferDealPriceBreakDown:s,offerDealDiscountAmount:l,operatorOfferTitle:u}}):[]}function o(e){return e&&(!!e.mopCardOfferDealDisclaimer||!!e.summarySheetOfferDealPriceBreakDown||!!e.offerDealDiscountAmount||!!e.operatorOfferTitle)}},57718:function(e,t,n){n.d(t,{Ay:function(){return O},az:function(){return w},wj:function(){return a}});var r,a,o=n(34453),i=n(542),s=n(7343),l=n(86615),u=n(98505),d=n(75408),c=n(80913),p=n(37034),f=n(15481),v=n(89383),m=n(57708),g=n(1735),P=n(1357),h=n(58133),y=n(60945),C=n(57329),I=n(94518),D=n(59977),E=n(46025),S=n(36655);let A={ACQUISITION:"NORMAL_SUBSCRIPTION",UPGRADE:"UPGRADE",DOWNGRADE:"DOWNGRADE"};function O(){let e=(0,m.J)(e=>e.productId),t=(0,m.J)(e=>e.subscriptionFlow),n=(0,p.GV)(e=>e.user),{query:r}=(0,i.useRouter)(),{goToSubscriptionCongratsPage:a}=(0,s.A)(),o=(0,m.J)(e=>e.resetPayment),u=(0,v.Z)(e=>e.resetOfferGlobalData),c=(0,f.T)(e=>e.resetDeal),h=(0,l.j)(e=>e.clearCreditCardInfo),y=(0,p.GV)(e=>{var t;return null===(t=e.autoPairing)||void 0===t?void 0:t.pairCode}),E=(0,g.d)(e=>e.resetState),O=(0,d.lv)(n,r),w=(0,P.p)(e=>e.resetSelectedAddOnsStore),{sendSubscriptionFailedEvent:k}=(0,S.C)(),T=()=>{o(),c(),h(),E(),u(),w()};return window.addEventListener("resetStore",()=>{T()}),{handlePaymentSuccess:()=>{if((0,D.Jk)()){T(),I.A.dispatchEvent(C.R.SUBSCRIPTION,C.d.ON_SUCCESS,{ovpSku:e,subscriptionUpdateType:A[O],rendezvousCode:y});return}a(t)},handlePaymentFailure:()=>{k(),I.A.dispatchEvent(C.R.SUBSCRIPTION,C.d.ON_FAILURE)},resetStore:T}}function w(e){let{type:t}=e,n=(0,p.GV)(e=>e.user),r=(0,p.jL)(),{goToPaymentPage:a,goToSubscriptionGobxLinkingPage:i,goToRegistrationPage:l,replaceSubscriptionGobxLinkingPage:d,replacePaymentPage:m,goToCodeRedemptionPage:P}=(0,s.A)(),C=(0,f.T)(e=>e.resetDeal),I=(0,g.d)(e=>e.resetState),D=(0,v.Z)(e=>e.resetOfferGlobalData),{i18n:S}=(0,o.useTranslation)("subscription"),A=()=>{switch(t){case"NORMAL":C(),I();break;case"COUPON":C(),D();break;case"DEAL":I(),D()}},O=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{productId:n,subscriptionFlow:a,goBox:o}=e,i=n===y.Gy.FREE?h.C_:(0,u.BB)(o),s=n===y.Gy.FREE?{language:S.language}:{productId:n,subscriptionFlow:a};A(),r((0,c.DJ)({routeName:i,data:s})),t||l()},w=e=>{var t,r;let{productId:o,subscriptionFlow:s,goBox:l}=e;if(A(),l){i({productId:o,subscriptionFlow:s});return}if((null==n?void 0:null===(r=n.activeSubscription)||void 0===r?void 0:null===(t=r.paymentMethod)||void 0===t?void 0:t.paymentMethodType)===E.J1.VOUCHER_2){P();return}a({productId:o,subscriptionFlow:s})};return{start:e=>{if(n){w(e);return}O(e)},startRegisteredUser:w,startAnonymousUser:O,replacePaymentWithNewPackage:e=>{let{productId:t,subscriptionFlow:n,goBox:r,...a}=e;if(A(),r){d({productId:t,subscriptionFlow:n,...a});return}m({productId:t,subscriptionFlow:n,...a})}}}(r=a||(a={})).NORMAL="NORMAL",r.DEAL="DEAL",r.OFFER="OFFER",r.COUPON="COUPON"},36655:function(e,t,n){n.d(t,{C:function(){return d}});var r=n(3514),a=n.n(r),o=n(21562),i=n(1626),s=n(57708),l=n(75433);let u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return a()(t)||(n={...t}),n},d=()=>{var e;let t=(0,i.B)(),n=(0,s.J)(e=>e.selectedPlan),r=(0,s.J)(e=>e.subscriptionFlow),a=(0,s.J)(e=>e.paymentMethods),d=(0,s.J)(e=>e.selectedPaymentMethod),c=null==a?void 0:null===(e=a[d])||void 0===e?void 0:e.type;return{sendPageView:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=u(o.ss.PAGE_VIEW,e);t(o.ss.PAGE_VIEW,r,n)},sendTrackingEvent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=u(o.ss.EVENT_TRACKING,e);t(o.ss.EVENT_TRACKING,n)},sendPageChange:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=u(o.ss.PAGE_CHANGE,e);t(o.ss.PAGE_CHANGE,n)},sendSubscriptionFailedEvent:()=>{t(o.ss.PAGE_VIEW,{virtualPagePath:(0,l.iA)(c,r),"user.paymentMethod":c,"user.packageDuration":n}),t(o.ss.EVENT_TRACKING,{virtualPagePath:(0,l.iA)(c,r),eventCategory:o.VT.SUBSCRIPTIONS,eventAction:o.Zm.FAILURE,eventLabel:o.r0.REGISTERED,"user.paymentMethod":(0,l.eB)(c),"user.packageDuration":n})}}}},86615:function(e,t,n){n.d(t,{j:function(){return i}});var r=n(20525),a=n(98267);let o={cardInformation:null},i=(0,r.vt)()((0,a.Zr)(e=>({...o,saveCreditCardInfo:t=>e({cardInformation:t}),clearCreditCardInfo:()=>e({cardInformation:{...o.cardInformation}})}),{name:"card-information-data"}))},1626:function(e,t,n){n.d(t,{B:function(){return C}});var r=n(3514),a=n.n(r),o=n(14568),i=n(75832),s=n(17189),l=n(57329),u=n(94518),d=n(93741),c=n(46025),p=n(74192),f=n(25620),v=n(59977),m=n(21562),g=n(75433);let P=()=>JSON.parse(localStorage.getItem("GTMQueueEvents")||"[]"),h=e=>localStorage.setItem("GTMQueueEvents",JSON.stringify(e)),y=e=>{var t,n,r,s,l;let u=(0,f.HN)(),{profiles:P}=u,h=null!==(t=null==e?void 0:e.user)&&void 0!==t?t:u.user,y=null==P?void 0:P.profileList,C=(0,p.oh)(y,d.hFp.ADULT),I=C&&C.length>0?C[0]:null,D=a()(null==P?void 0:P.selectedProfile)?I:null==P?void 0:P.selectedProfile,E=(null==e?void 0:e.selectedAddOns)||[],S=a()(E)?"none":null==E?void 0:E.join(":"),A=i.v.environment,O={platform:(0,v.Jk)()?m.wA.MOBILE_APP:m.wA.WEB,environment:m.vG[A],PAO:S,content:"","content.bcmMediaID":"","content.bcmShowMediaID":"","content.genre":"","content.mediaType":"","content.showDialect":"","content.showEpisodeNo":"","content.showID":"","content.showLanguages":"","content.showName":"","content.showProductionYear":"","content.showSeason":"","content.showType":"","content.tags":"","content.plusContent":"","content.tvChannel":"",eventCategory:"",eventAction:"",eventLabel:"",partner:"","partner.id":"","partner.name":"",configuration:"","configuration.id":"",offer:"","offer.id":"","offer.template":"",user:"","user.id":"","user.type":"","user.status":"","user.profileID":"","user.kidAge":"none","user.paymentMethod":"","user.packageDuration":"","user.authenticationProvider":"","user.registrations":0,"user.subscriptions_new":0,"user.subscriptions_cancelation":0,"user.logins":0,userMetrics:"","userMetrics.subscriptions_renewal":0,player:"","player.plays":0,"player.loads":0,"player.terminations":0,"player.playingTime":0,"player.mediaDuration":0,"player.mediaPosition":0,"player.filledAds":0,"player.emptyAds":0,"player.errorAds":0,"player.mediaDurationRange":"","player.playingTimeRange":""};if(D){O["user.profileID"]="".concat(D.type&&D.type===d.hFp.ADULT?"A":"K","-").concat(D.id?D.id:"");let e=D.age?D.age:"none";O["user.kidAge"]=e,O.pg_UILanguage=(0,o.UK)()}if(D){let e=I&&I.preference?I.preference.language:(0,v.xd)(),t=(null==h?void 0:null===(n=h.activeSubscription)||void 0===n?void 0:n.ovpSku)||"none",r=m.kC[t]||"none";O.rest="L=".concat(e,"|P=").concat(t,"|Q=none|CP=").concat(r,"|PAO=").concat(S)}if(h&&void 0!==h.id){O["user.id"]=h.id.toString(),O["user.type"]=(0,f.Fq)(h)?"subscribed":"registered",O["user.status"]=(0,g.uS)(h),O["user.authenticationProvider"]=(0,g.j5)(h);let e="";if((0,f.Fq)(h)&&h.activeSubscription){let t=null===(r=h.userPricingPlan)||void 0===r?void 0:r.duration;e=null==h?void 0:null===(l=h.activeSubscription)||void 0===l?void 0:null===(s=l.paymentMethod)||void 0===s?void 0:s.paymentMethodName,O["user.packageDuration"]=t||"",O["user.paymentMethod"]=e?(0,g.eB)(e):""}(0,f.Fq)(h)&&(h.loginProvider===d.rQk.SAML_SLING||h.loginProvider===d.rQk.SMAL_DISH)&&(e=h.loginProvider===d.rQk.SAML_SLING?c.J1.SLING:c.J1.DISH,O["user.packageDuration"]="monthly",O["user.paymentMethod"]=(0,g.eB)(e)),(0,f.zN)(h)&&(O["user.packageDuration"]="none",O["user.paymentMethod"]="none")}else O["user.type"]="anonymous";return O};function C(){let e=[m.kQ.PROFILE,m.kQ.PROFILE_SELECTION],t=[m.kQ.LOGOUT];return(n,r,a)=>{var o,i,d;let c;let p=!!window&&(null===(i=window)||void 0===i?void 0:null===(o=i.location)||void 0===o?void 0:o.href.indexOf(s.kp.hub))>-1,{virtualPagePath:f}=r;c=p||e.includes(f)||t.includes(f)?n===m.ss.EVENT_TRACKING?m.p$.WIDGET_EVENT:m.p$.WIDGET_PAGE_VIEW:n;try{if(window&&window.dataLayer){let e=y(a);if((0,v.Jk)()){let t=(0,g.Yu)(r,e),a=(0,g.vd)(r,n,t);u.A.dispatchEvent(l.R.ANALYTICS,n,{...a})}else null===(d=window.dataLayer)||void 0===d||d.push({...e,event:c,...r})}else{let e=P();e.push({event:c,...r}),h(e)}}catch(t){let e=P();e.push({event:c,...r}),h(e),console.log("window.dataLayer is not initialized correctly")}}}},74192:function(e,t,n){n.d(t,{oh:function(){return a},sd:function(){return r}});let r=(e,t)=>{let n={};return(t||[]).forEach(e=>{var t;n[null==e?void 0:null===(t=e.avatar)||void 0===t?void 0:t.alias]=!0}),(e||[]).filter(e=>!n[e.id])},a=(e,t)=>null==e?void 0:e.filter(e=>e.type===t)}}]);